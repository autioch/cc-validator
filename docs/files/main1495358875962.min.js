!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var n=i(31),s=i(39),r=new n;new s(r),window.appModel=r},function(t,e,i){"use strict";t.exports={clone:i(34),empty:i(35),forOwn:i(5),merge:i(36),tag:i(37),toggleClass:i(38)}},function(t,e,i){"use strict";t.exports={Emitter:i(4),Model:i(6),View:i(7)}},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.call(this,t),this.config=r(u,t),this.set("valid",this.validate()),this.on("change:value",this.syncValid,this)}var s=i(1),r=s.merge,o=i(2),l=o.Model,u={key:null,value:null,label:"",visible:!0,required:!0,valid:!0,fresh:!0};n.prototype=r(l.prototype,{constructor:n,syncValid:function(){this.set("fresh",!1).set("valid",this.validate())},validate:function(){return!0}}),t.exports=n},function(t,e){"use strict";function i(){this.__listeners={}}i.prototype={constructor:i,getListeners:function(t){return this.__listeners[t]||(this.__listeners[t]=[]),this.__listeners[t]},emit:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return this.getListeners(t).forEach(function(t){var e=t.callback,n=t.context;return e.apply(n,i)}),this},on:function(t,e,i){return this.getListeners(t).push({callback:e,context:i}),this},off:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getListeners(t);return i?(this.__listeners[t]=n.filter(function(t){return t.callback!==i}),this):t?(this.__listeners[t]=[],this):(Object.keys(this.__listeners).forEach(function(t){e.listeners[t]=null}),this.listeners=[],this)}},t.exports=i},function(t,e){"use strict";t.exports=function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)e(t[i[n]],i[n])}},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.call(this),this.config=r(this.defaultConfig(),t)}var s=i(1),r=s.merge,o=s.clone,l=i(4);n.prototype=r(l.prototype,{constructor:n,defaultConfig:function(){return{}},set:function(t,e){return this.config[t]=e,this.emit("change:"+t,this,e)},get:function(t){return this.config[t]},serialize:function(){return o(this.config)}}),t.exports=n},function(t,e,i){"use strict";function n(t){var e=this;this.el=r(this.tagName+"."+this.className),this.model=t,this.props.forEach(function(t){return o(e.el,"is-"+t,e.model.get(t))}),this.props.forEach(function(t){var i="is-"+t;e.model.on("change:"+t,function(){return o(e.el,i,e.model.get(t))})}),this.render()}var s=i(1),r=s.tag,o=s.toggleClass;n.prototype={className:"",tagName:"div",constructor:n,render:function(){return this},props:[],remove:function(){var t=this;this.el.parentNode&&this.el.parentNode.remove(this.el),Object.keys(this).forEach(function(e){t[e]=null})}},t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.call(this,t)}var s=i(1),r=s.merge,o=i(3),l=i(9);n.prototype=r(o.prototype,{constructor:n,validate:function(){return!this.get("required")||l(this.get("value"))}}),t.exports=n},function(t,e){"use strict";t.exports=function(t){return t}},function(t,e,i){"use strict";function n(t){a.call(this,t),this.el.checked=this.model.get("value")}var s=i(1),r=s.merge,o=s.tag,l=s.empty,u=i(2),a=u.View;i(40),n.prototype=r(a.prototype,{tagName:"label",className:"c-field c-field__boolean",props:["visible","valid","fresh"],render:function(){l(this.el),this.el.appendChild(o("div.c-field__header",this.model.get("label"))),this.el.appendChild(this.getInputEl())},getInputEl:function(){return this.inputEl||(this.inputEl=o("input.c-field__input",{type:"checkbox",value:this.model.get("value")}),this.inputEl.addEventListener("change",this.syncValue.bind(this))),this.inputEl},syncValue:function(){this.model.set("value",!!this.inputEl.checked)}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.call(this,t)}var s=i(1),r=s.merge,o=i(3),l=i(12);n.prototype=r(o.prototype,{constructor:n,validate:function(){return!this.get("required")||l(this.get("value"))}}),t.exports=n},function(t,e){"use strict";var i=16;t.exports=function(t){var e=t.replace(/\D/g,"");return e.length===i}},function(t,e,i){"use strict";function n(t){a.call(this,t)}var s=i(1),r=s.merge,o=s.tag,l=s.empty,u=i(2),a=u.View;i(41),n.prototype=r(a.prototype,{tagName:"label",className:"c-field c-field__boolean",props:["visible","valid","fresh"],render:function(){l(this.el),this.el.appendChild(o("div.c-field__header",this.model.get("label"))),this.el.appendChild(this.getInputEl())},getInputEl:function(){return this.inputEl||(this.inputEl=o("input.c-field__input",{type:"text",value:this.model.get("value"),placeholder:"XXXX-XXXX-XXXX-XXXX"}),this.inputEl.addEventListener("change",this.syncValue.bind(this)),this.inputEl.addEventListener("keyup",this.syncValue.bind(this)),this.inputEl.addEventListener("blur",this.syncValue.bind(this))),this.inputEl},syncValue:function(){this.model.set("value",this.inputEl.value)}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.call(this,t)}var s=i(1),r=s.merge,o=i(3),l=i(15);n.prototype=r(o.prototype,{constructor:n,validate:function(){return!this.get("required")||l(this.get("value"))}}),t.exports=n},function(t,e){"use strict";var i=3;t.exports=function(t){var e=parseInt(t,10);return t.length===i&&!isNaN(e)&&e.toString()===t}},function(t,e,i){"use strict";function n(t){a.call(this,t),this.el.checked=this.model.get("value")}var s=i(1),r=s.merge,o=s.tag,l=s.empty,u=i(2),a=u.View;i(42),n.prototype=r(a.prototype,{tagName:"label",className:"c-field c-field__boolean",props:["visible","valid","fresh"],render:function(){l(this.el),this.el.appendChild(o("div.c-field__header",this.model.get("label"))),this.el.appendChild(this.getInputEl())},getInputEl:function(){return this.inputEl||(this.inputEl=o("input.c-field__input",{type:"text",value:this.model.get("value"),placeholder:"123"}),this.inputEl.addEventListener("change",this.syncValue.bind(this)),this.inputEl.addEventListener("keyup",this.syncValue.bind(this)),this.inputEl.addEventListener("blur",this.syncValue.bind(this))),this.inputEl},syncValue:function(){this.model.set("value",this.inputEl.value)}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.call(this,t)}var s=i(1),r=s.merge,o=i(3),l=i(18);n.prototype=r(o.prototype,{constructor:n,validate:function(){return!this.get("required")||l(this.get("value"))}}),t.exports=n},function(t,e){"use strict";var i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=new Date;t.exports=function(t){if(!i.test(t))return!1;var e=new Date(t);return!isNaN(e.getTime())&&e>n}},function(t,e,i){"use strict";function n(t){a.call(this,t),this.el.checked=this.model.get("value")}var s=i(1),r=s.merge,o=s.tag,l=s.empty,u=i(2),a=u.View;i(43),n.prototype=r(a.prototype,{tagName:"label",className:"c-field c-field__boolean",props:["visible","valid","fresh"],render:function(){l(this.el),this.el.appendChild(o("div.c-field__header",this.model.get("label"))),this.el.appendChild(this.getInputEl())},getInputEl:function(){return this.inputEl||(this.inputEl=o("input.c-field__input",{type:"text",value:this.model.get("value"),placeholder:"YYYY-MM-DD"}),this.inputEl.addEventListener("change",this.syncValue.bind(this)),this.inputEl.addEventListener("keyup",this.syncValue.bind(this)),this.inputEl.addEventListener("blur",this.syncValue.bind(this))),this.inputEl},syncValue:function(){this.model.set("value",this.inputEl.value)}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.call(this,t),this.on("change:required",this.syncValid,this)}var s=i(1),r=s.merge,o=i(3),l=i(21);n.prototype=r(o.prototype,{constructor:n,validate:function(){return!this.get("required")||l(this.get("value"))}}),t.exports=n},function(t,e){"use strict";var i=/[a-zA-Z0-9+]+/,n=/[a-zA-Z0-9]+\.[a-z]{2,}/;t.exports=function(t){var e=t.trim().split("@"),s=e[0],r=e[1];return!!(s&&r&&i.test(s)&&n.test(r))}},function(t,e,i){"use strict";function n(t){a.call(this,t),this.el.checked=this.model.get("value")}var s=i(1),r=s.merge,o=s.tag,l=s.empty,u=i(2),a=u.View;i(44),n.prototype=r(a.prototype,{tagName:"label",className:"c-field c-field__boolean",props:["visible","valid","fresh"],render:function(){l(this.el),this.el.appendChild(o("div.c-field__header",this.model.get("label"))),this.el.appendChild(this.getInputEl())},getInputEl:function(){return this.inputEl||(this.inputEl=o("input.c-field__input",{type:"text",value:this.model.get("value"),placeholder:"john.doe@gmail.com"}),this.inputEl.addEventListener("change",this.syncValue.bind(this)),this.inputEl.addEventListener("keyup",this.syncValue.bind(this)),this.inputEl.addEventListener("blur",this.syncValue.bind(this))),this.inputEl},syncValue:function(){this.model.set("value",this.inputEl.value)}}),t.exports=n},function(t,e,i){"use strict";var n={bool:i(8),creditCardNumber:i(11),cvvNumber:i(14),date:i(17),email:i(20)};t.exports=function(t){return new n[t.type](t)}},function(t,e,i){"use strict";i(45);var n={bool:i(10),creditCardNumber:i(13),cvvNumber:i(16),date:i(19),email:i(22)};t.exports=function(t){return n[t.get("type")]?new(n[t.get("type")])(t):null}},function(t,e,i){"use strict";function n(t,e){var i=this;l.call(this,t),this.fields=e.map(function(t){var e=u(t);return e.on("change:valid",i.syncValid,i),e}),this.syncValid(),this.on("change:value",this.syncValid,this)}var s=i(1),r=s.merge,o=i(2),l=o.Model,u=i(23);n.prototype=r(l.prototype,{constructor:n,defaultConfig:function(){return{valid:!1,locked:!1,visible:!0,header:""}},syncValid:function(){this.set("valid",this.validate())},validate:function(){return this.fields.filter(function(t){return t.get("required")}).every(function(t){return t.get("valid")})},serialize:function(){return this.fields.map(function(t){return t.serialize()})},setFieldValue:function(t,e){var i=this.getField(t);if(!i)throw Error("FormModel does not have field "+t+".");i.set("value",e)},getField:function(t){return this.fields.find(function(e){return e.config.key===t})},save:function(){this.fields.filter(function(t){return t.get("required")}).forEach(function(t){t.set("fresh",!1),t.validate()}),this.get("valid")&&this.emit("save",this.serialize())}}),t.exports=n},function(t,e,i){"use strict";function n(t){a.call(this,t),l(this.el,"is-valid",this.model.get("valid"))}var s=i(1),r=s.merge,o=s.tag,l=s.toggleClass,u=i(2),a=u.View,c=i(24);i(46),n.prototype=r(a.prototype,{className:"m-form",props:["visible","locked","valid"],render:function(){var t=this;this.el.appendChild(o("header.m-form__header",this.model.get("header"))),this.subviews=this.model.fields.map(function(t){return c(t)}),this.subviews.forEach(function(e){return t.el.appendChild(e.el)}),this.el.appendChild(this.getSubmitEl())},getSubmitEl:function(){var t=this;return this.submitEl||(this.submitEl=o("span.m-form__submit",this.model.config.submitLabel),this.submitEl.addEventListener("click",function(){return t.model.save()})),this.submitEl}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.call(this,t)}var s=i(1),r=s.merge,o=i(2),l=o.Model;n.prototype=r(l.prototype,{constructor:n,defaultConfig:function(){return{message:"Success",visible:!1}}}),t.exports=n},function(t,e,i){"use strict";function n(t){l.call(this,t)}var s=i(1),r=s.merge,o=i(2),l=o.View;i(47),n.prototype=r(l.prototype,{className:"m-loader",props:["visible"],render:function(){this.el.textContent="Loading, please wait..."}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.call(this,t)}var s=i(1),r=s.merge,o=i(2),l=o.Model;n.prototype=r(l.prototype,{constructor:n,defaultConfig:function(){return{message:"Success",visible:!1}}}),t.exports=n},function(t,e,i){"use strict";function n(t){l.call(this,t)}var s=i(1),r=s.merge,o=i(2),l=o.View;i(48),n.prototype=r(l.prototype,{className:"m-message",props:["visible"],render:function(){this.el.textContent=this.model.get("message")}}),t.exports=n},function(t,e,i){"use strict";function n(){var t=this;this.formModel=new a(r,o),this.loaderModel=new d,this.messageModel=new h({message:u}),this.storeModel=new c({waitTime:l}),this.storeModel.on("change:isSaving",function(e,i){return t.loaderModel.set("visible",i)}),this.storeModel.on("change:isSaving",function(e,i){return t.formModel.set("locked",i)}),this.storeModel.on("change:isSaved",function(e,i){return t.messageModel.set("visible",i)}),this.storeModel.on("change:isSaved",function(e,i){return t.formModel.set("visible",!i)}),this.formModel.on("save",function(e){return t.storeModel.save(e)});var e=this.formModel.getField("userEmail"),i=this.formModel.getField("storeCard");i.on("change:value",function(t,i){var n=!!i;e.set("visible",n).set("required",n)})}var s=i(32),r=s.config,o=s.fields,l=s.waitTime,u=s.successMessage,a=i(25),c=i(33),d=i(27),h=i(29);t.exports=n},function(t,e){"use strict";var i=2e3;t.exports={config:{header:"No data is stored. This is only validation.",submitLabel:"Confirm validation"},waitTime:i,successMessage:"Success!",fields:[{key:"ccNumber",type:"creditCardNumber",label:"Credit card number",value:""},{key:"expirationDate",type:"date",label:"Expiration date",value:""},{key:"cvvNumber",type:"cvvNumber",label:"CVV Number",value:""},{key:"storeCard",type:"bool",label:"Validate email",value:!1,required:!1},{key:"userEmail",type:"email",label:"Email",visible:!1,value:"",required:!1}]}},function(t,e,i){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.call(this,t)}var s=i(1),r=s.merge,o=i(2),l=o.Model;n.prototype=r(l.prototype,{constructor:n,defaultConfig:function(){return{valid:!0,isSaving:!1,isSaved:!1,savePromise:null,savedData:null,waitTime:0}},save:function(t){var e=this;if(!this.get("isSaving")){this.set("isSaving",!0);var i=new Promise(function(i){return setTimeout(function(){return i(t)},e.get("waitTime"))}).then(function(){return e.set("isSaving",!1).set("isSaved",!0).set("savePromise",null)});this.set("savePromise",i)}return this.get("savePromise")}}),t.exports=n},function(t,e){"use strict";t.exports=function(t){return JSON.parse(JSON.stringify(t))}},function(t,e){"use strict";t.exports=function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}},function(t,e){"use strict";t.exports=function(){for(var t={},e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach(function(e){Object.keys(e).forEach(function(i){t[i]=e[i]})}),t}},function(t,e,i){"use strict";function n(t){return t&&(t.nodeName&&t.nodeType||t instanceof Text)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=i(5);t.exports=function(t){for(var e=void 0,i=arguments.length,o=Array(i>1?i-1:0),l=1;l<i;l++)o[l-1]=arguments[l];if("string"==typeof t){var u=t.split("."),a=u[0],c=u.slice(1);e=document.createElement(""===a?"div":a),c.length&&(e.className=c.join(" "))}else e=document.createElement("div"),void 0!==t&&o.unshift(t);return o.forEach(function(t){Array.isArray(t)?t.forEach(function(t){return e.appendChild(n(t)?t:document.createTextNode(t))}):n(t)?e.appendChild(t):null!==t&&"object"===("undefined"==typeof t?"undefined":s(t))?r(t,function(t,i){e[i]=t}):e.appendChild(document.createTextNode(t))}),e}},function(t,e){"use strict";t.exports=function(t,e,i){return i?t.classList.add(e):t.classList.remove(e),t}},function(t,e,i){"use strict";function n(t){this.messageView=new s(t.messageModel),this.loaderView=new r(t.loaderModel),this.formView=new o(t.formModel),l.appendChild(this.messageView.el),l.appendChild(this.loaderView.el),l.appendChild(this.formView.el)}var s=i(30),r=i(28),o=i(26);i(49);var l=document.body;t.exports=n},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){}]);